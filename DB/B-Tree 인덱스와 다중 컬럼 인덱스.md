![](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc140d9fd-d93e-43ae-9417-35291b842ebe%2FUntitled.png?table=block&id=9b43e02e-a796-469f-bc7b-15417e5d473c&spaceId=b453bd85-cb15-44b5-bf2e-580aeda8074e&width=2000&userId=80352c12-65a4-4562-9a36-2179ed0dfffb&cache=v2)

## B-Tree 인덱스
- 트리의 노드가 한 방향으로 쏠리지 않게 재정렬을 통해, 각 노드 수의 밸런스를 유지하는 트리 형태의 자료구조
- B-Tree는 데이터베이스의 인덱싱 알고리즘 가운데 가장 일반적으로 사용되고, 가장 먼저 도입된 알고리즘이다
- B는 Binary(이진)이 아니라, Balanced(균형 잡힌)의 약자임을 기억하자
- B-Tree는 컬럼의 원래 값을 변형하지 않고 인덱스 구조체 내에서는 항상 정렬된 상태를 유지한다
- 전문 검색과 같은 특수한 요건이 아닌 경우, 대부분 인덱스는 B-Tree를 사용한다

## B-Tree 구조
![](https://www.notion.so/image/https%3A%2F%2Fs3-us-west-2.amazonaws.com%2Fsecure.notion-static.com%2Fc140d9fd-d93e-43ae-9417-35291b842ebe%2FUntitled.png?table=block&id=9b43e02e-a796-469f-bc7b-15417e5d473c&spaceId=b453bd85-cb15-44b5-bf2e-580aeda8074e&width=2000&userId=80352c12-65a4-4562-9a36-2179ed0dfffb&cache=v2)
- 최상위: 루트 노드
- 최하위: 리프 노드
- 루트 노드도 리프 노드도 아닌 노드를 브랜치 노드라고 한다
- 노드가 균형 있게 구성되어 있어서, 최악의 경우이더라도 일관된 탐색 시간 O(logN)을 갖는다

## 다중 컬럼 인덱스
- 두 개 이상의 컬럼으로 구성된 인덱스를 다중 컬럼 인덱스라고 한다
- 멀티 컬럼 인덱스, 복합 컬럼 인덱스, concatenated index라고도 부른다

## 다중 컬럼 인덱스는 언제 사용할까?
- 데이터를 조회할 때 단일 인덱스를 여러 개를 사용해야 하는 경우가 많다면 다중 컬럼 인덱스를 고려해 본다

## 면접 질문: B-Tree 구조에 대해 설명하라
- 트리의 노드가 한 방향으로 쏠리지 않게 재정령을 통해, 각 노드 수의 밸런스를 유지하는 트리 형태의 자료구조이다

## 면접 질문: B-Tree의 장점과 단점에 대해 설명하라
- 장점
    - 노드가 균형 있게 구성되어 있어서, 최악의 경우이더라도 일관된 탐색 시간 O(logN)을 가질 수 있다
- 단점
    - 재정렬을 해야 하는 작업으로 인해, 노드를 삽입하거나 식제할때 일반적인 트리보다 성능이 떨어진다
## 면접 질문: 인덱스는 어떻게 작동하는가
- 일반적으로 B-Tree 자료 구조를 사용하여 검색해야 할 값을 루트 노드에서부터 비교를 시작해 브랜치 노드를 거치고 최종적으로 리프 노드까지 찾아 들어간다. 
- 그리고 리프 노드의 레코드 주소를 사용하여 실제 데이터 파일에 존재하는 레코드를 읽는다.
## 면접 질문: 멀티 컬럼 인덱스는 언제 사용하는가?
- 데이터를 조회할 때 단일 인덱스를 여러 개를 사용해야 하는 경우가 많다면 다중 컬럼 인덱스를 고려해 본다. 
- 예를 들어 A, B 컬럼을 바탕으로 데이터 탐색을 자주 할 경우 A, B에 단일 인덱스에 걸려 있는 상태에서 조회하는 성능보다 A, B에 다중 컬럼 인덱스가 걸려 있는 경우에 데이터 액세스가 줄어들어 성능이 더 좋기 때문이다
## 면접 질문: 멀티 컬럼 인덱스를 사용할 때 주의점은?
- 다중 컬럼 인덱스에서 중요한 것은 인덱스의 두 번째 컬럼은 첫 번째 컬럼에 의존해서 정렬되어 있다는 것이다. 
- 즉, 두 번째 컬럼은 첫 번째 컬럼이 똑같은 레코드에서만 의미가 있다. 
- 그래서 컬럼의 순서를 신중하게 결정해야 한다. 가령, = 조건과 같이 개수가 적은 데이터를 조회하는 컬럼을 다중 컬럼 인덱스 앞 쪽에 설정하고, 범위 검색과 같이 개수가 많은 데이터를 조회하는 컬럼을 다중 컬럼 인덱스 뒤쪽에 설정하는 것이 좋다.

- 단일 컬럼 인덱스보다 더 비효율적으로 Insert/Update/Delete를 수행하므로 가급적 업데이트가 안 되는 값을 선정해서 사용하는 것이 좋다.

## 참고자료 출처
[https://steady-coding.tistory.com/546](https://steady-coding.tistory.com/546)